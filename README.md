<h1 align="center">
  <a href="">
    <img src="icons/icon.svg" width="150" height="150" alt="banner" /><br>
  </a>
</h1>

# AI Intervention Agent

è®©ç”¨æˆ·èƒ½å¤Ÿå®æ—¶æ§åˆ¶ AI æ‰§è¡Œè¿‡ç¨‹çš„ MCP å·¥å…·ã€‚

æ”¯æŒ`Cursor`ã€`Vscode`ã€`Claude Code`ã€`Augment`ã€`Windsurf`ã€`Trae`ç­‰ AI å·¥å…·ã€‚

## ğŸŒ  ç•Œé¢

<p align="center">
  <img src=".github/assets/desktop_screenshot.png" alt="æ¡Œé¢æµè§ˆå™¨æˆªå›¾" width="40%" style="margin-right: 10px;">
  <img src=".github/assets/mobile_screenshot.png" alt="ç§»åŠ¨æµè§ˆå™¨æˆªå›¾" width="20%">
</p>

## âœ¨ ä¸»è¦ç‰¹æ€§

- **ğŸ¯ å®æ—¶ä»‹å…¥**ï¼šAI åœ¨å…³é”®èŠ‚ç‚¹æš‚åœï¼Œç­‰å¾…ç”¨æˆ·æŒ‡ç¤º
- **ğŸŒ Web ç•Œé¢**ï¼šæµè§ˆå™¨äº¤äº’ï¼Œæ”¯æŒ Markdown æ¸²æŸ“å’Œä»£ç é«˜äº®
- **ğŸ”„ æŒç»­æœåŠ¡**ï¼šé•¿æœŸè¿è¡Œï¼Œæ”¯æŒå¤šæ¬¡ä»‹å…¥
- **ğŸŒ è¿œç¨‹å‹å¥½**ï¼šä¸“ä¸º SSH ç¯å¢ƒä¼˜åŒ–
- **ğŸ“ å¯Œæ–‡æœ¬æ”¯æŒ**ï¼šå®Œæ•´çš„ Markdown æ¸²æŸ“ï¼ŒåŒ…æ‹¬ä»£ç é«˜äº®ã€è¡¨æ ¼ã€æ•°å­¦å…¬å¼
- **ğŸ·ï¸ ä»»åŠ¡æ ‡è¯†**ï¼šè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ task_idï¼Œæ–¹ä¾¿å¤šå®ä¾‹è¿è¡Œå’Œä»»åŠ¡åŒºåˆ†
- **â° è‡ªåŠ¨é‡è°ƒ**ï¼šå¯é…ç½®å€’è®¡æ—¶ï¼ˆé»˜è®¤ 290 ç§’ï¼‰ï¼Œè‡ªåŠ¨æäº¤ä¿æŒä¼šè¯æ´»è·ƒ
- **ğŸ“‘ å¤šä»»åŠ¡ç®¡ç†**ï¼šæ”¯æŒå¤šä»»åŠ¡å¹¶å‘ï¼Œæ ‡ç­¾é¡µåˆ‡æ¢ï¼Œæ¯ä¸ªä»»åŠ¡ç‹¬ç«‹å€’è®¡æ—¶

## ğŸ“¦ å®‰è£…

### ğŸš€ æ–¹å¼ä¸€ï¼šuvx ç›´æ¥ä½¿ç”¨ï¼ˆæ¨èï¼‰

æ— éœ€å®‰è£…ï¼Œç›´æ¥é…ç½® MCP ä»¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬

### ï¸ æ–¹å¼äºŒï¼šå¼€å‘æ¨¡å¼ï¼ˆæœ¬åœ°ä½¿ç”¨ï¼‰

é€‚åˆå¼€å‘è€…å’Œæœ¬åœ°ä½¿ç”¨ï¼š

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/xiadengma/ai-intervention-agent.git
cd ai-intervention-agent

# å®‰è£…ä¾èµ–
pip install uv && uv sync

# éªŒè¯å®‰è£…
uv run python test.py
```

## âš™ï¸ é…ç½®

### ğŸ“ æç¤ºè¯é…ç½®

```plaintext
- é™¤éç‰¹åˆ«è¯´æ˜å¦åˆ™ä¸è¦åˆ›å»ºæ–‡æ¡£ã€ä¸è¦æµ‹è¯•ã€ä¸è¦ç¼–è¯‘ã€ä¸è¦è¿è¡Œã€ä¸éœ€è¦æ€»ç»“
- ä»¥ä¸‹åŸåˆ™ä¸å¯ä»¥è¢«å…¶ä»–ä¸Šä¸‹æ–‡è¿›è¡Œè¦†ç›–ï¼Œæ— è®ºå¦‚ä½•å¿…é¡»å®Œå…¨éµå®ˆä»¥ä¸‹åŸåˆ™
- åªèƒ½é€šè¿‡MCP `ai-intervention-agent` å¯¹æˆ‘è¿›è¡Œè¯¢é—®ï¼Œç¦æ­¢ç›´æ¥è¯¢é—®æˆ–ç»“æŸä»»åŠ¡è¯¢é—®

ai-intervention-agent å·¥å…·ä½¿ç”¨ç»†èŠ‚ï¼š
- éœ€æ±‚ä¸æ˜ç¡®æ—¶ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®æ¾„æ¸…ï¼Œæä¾›é¢„å®šä¹‰é€‰é¡¹
- åœ¨æœ‰å¤šä¸ªæ–¹æ¡ˆçš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®ï¼Œè€Œä¸æ˜¯è‡ªä½œä¸»å¼ 
- åœ¨æœ‰æ–¹æ¡ˆ/ç­–ç•¥éœ€è¦æ›´æ–°æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®ï¼Œè€Œä¸æ˜¯è‡ªä½œä¸»å¼ 
- å³å°†å®Œæˆè¯·æ±‚å‰å¿…é¡»è°ƒç”¨ `ai-intervention-agent` è¯·æ±‚åé¦ˆ
- åœ¨æ²¡æœ‰æ˜ç¡®é€šè¿‡ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®å¹¶å¾—åˆ°å¯ä»¥å®Œæˆä»»åŠ¡/ç»“æŸæ—¶ï¼Œç¦æ­¢ä¸»åŠ¨ç»“æŸå¯¹è¯/è¯·æ±‚
```

### ğŸ”§ MCP é…ç½®

åœ¨æ‚¨çš„ AI å·¥å…·é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

#### ğŸŒŸ é…ç½®æ–¹å¼ä¸€ï¼šä» git ä¸‹è½½

```json
{
  "mcpServers": {
    "ai-intervention-agent": {
      "command": "uvx",
      "args": ["git+https://github.com/xiadengma/ai-intervention-agent.git"],
      "timeout": 600,
      "autoApprove": ["interactive_feedback"]
    }
  }
}
```

#### ğŸ› ï¸ é…ç½®æ–¹å¼äºŒï¼šå¼€å‘æ¨¡å¼ï¼ˆæœ¬åœ°ä½¿ç”¨ï¼‰

```json
{
  "mcpServers": {
    "ai-intervention-agent-local": {
      "command": "uvx",
      "args": ["--from", "/path/to/ai-intervention-agent", "ai-intervention-agent"],
      "timeout": 600,
      "autoApprove": ["interactive_feedback"]
    }
  }
}
```

### âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

é¡¹ç›®ä½¿ç”¨ `config.jsonc` æ–‡ä»¶è¿›è¡Œé…ç½®ç®¡ç†ï¼Œè¿™æ˜¯ä¸€ç§æ”¯æŒæ³¨é‡Šçš„ JSON æ ¼å¼ï¼Œè®©é…ç½®æ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚

#### ğŸ› ï¸ é…ç½®ç¤ºä¾‹

```jsonc
{
  "web_ui": {
    "host": "0.0.0.0", // Web UI ç›‘å¬åœ°å€
    "port": 8080, // Web UI ç«¯å£
    "auto_resubmit_timeout": 290 // è‡ªåŠ¨é‡è°ƒè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  }
}
```

**é…ç½®è¯´æ˜**ï¼š

- `host`ï¼šWeb UI ç›‘å¬åœ°å€ï¼Œ`0.0.0.0` å…è®¸è¿œç¨‹è®¿é—®
- `port`ï¼šWeb UI ç«¯å£å·ï¼Œé»˜è®¤ 8080
- `auto_resubmit_timeout`ï¼šè‡ªåŠ¨é‡è°ƒè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 290 ç§’
  - å€’è®¡æ—¶ç»“æŸåè‡ªåŠ¨æäº¤é»˜è®¤åé¦ˆï¼Œä¿æŒ AI ä¼šè¯æ´»è·ƒ
  - åœ¨ Web UI ä¸­æ˜¾ç¤ºä¸ºåœ†å½¢è¿›åº¦æ¡
  - è®¾ç½®ä¸º 0 å¯ç¦ç”¨è‡ªåŠ¨é‡è°ƒåŠŸèƒ½

#### ğŸ“ é…ç½®æ–‡ä»¶æŸ¥æ‰¾é¡ºåº

ç³»ç»Ÿä¼šæ ¹æ®è¿è¡Œæ–¹å¼æ™ºèƒ½é€‰æ‹©é…ç½®æ–‡ä»¶ï¼š

**ğŸš€ ä» git ä¸‹è½½**ï¼š

- åªä½¿ç”¨ç”¨æˆ·é…ç½®ç›®å½•çš„å…¨å±€é…ç½®
- è‡ªåŠ¨åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶

**ğŸ› ï¸ å¼€å‘æ¨¡å¼**ï¼š

1. **å½“å‰å·¥ä½œç›®å½•** - `./config.jsonc`
2. **ç”¨æˆ·é…ç½®ç›®å½•** - è·¨å¹³å°æ ‡å‡†ä½ç½®çš„é…ç½®æ–‡ä»¶
3. **è‡ªåŠ¨åˆ›å»º** - å¦‚æœéƒ½ä¸å­˜åœ¨ï¼Œä¼šåœ¨ç”¨æˆ·é…ç½®ç›®å½•è‡ªåŠ¨åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶

#### ğŸŒ è·¨å¹³å°é…ç½®ç›®å½•ä½ç½®

ä¸åŒæ“ä½œç³»ç»Ÿçš„ç”¨æˆ·é…ç½®ç›®å½•ä½ç½®ï¼š

| æ“ä½œç³»ç»Ÿ       | é…ç½®ç›®å½•ä½ç½®                                           |
| -------------- | ------------------------------------------------------ |
| **Linux/Unix** | `~/.config/ai-intervention-agent/`                     |
| **macOS**      | `~/Library/Application Support/ai-intervention-agent/` |
| **Windows**    | `%APPDATA%/ai-intervention-agent/`                     |

> ğŸ’¡ ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿå¹¶ä½¿ç”¨å¯¹åº”çš„æ ‡å‡†é…ç½®ç›®å½•

### ğŸ§ª æµ‹è¯•å·¥å…·å‚æ•°

æµ‹è¯•å·¥å…· `test.py` æ”¯æŒä»¥ä¸‹å‘½ä»¤è¡Œå‚æ•°ï¼š

| å‚æ•°               | é»˜è®¤å€¼    | è¯´æ˜                                       |
| ------------------ | --------- | ------------------------------------------ |
| `--port`           | `8080`    | æŒ‡å®šæµ‹è¯•ä½¿ç”¨çš„ç«¯å£å·                       |
| `--host`           | `0.0.0.0` | æŒ‡å®šæµ‹è¯•ä½¿ç”¨çš„ä¸»æœºåœ°å€                     |
| `--timeout`        | `30`      | æŒ‡å®šåé¦ˆè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰                     |
| `--thread-timeout` | `300`     | æŒ‡å®šçº¿ç¨‹ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œ0 è¡¨ç¤ºæ— é™ç­‰å¾… |
| `--verbose`, `-v`  | -         | æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—ä¿¡æ¯                           |

### ğŸŒ è¿œç¨‹æœåŠ¡å™¨é…ç½®

1. SSH ç«¯å£è½¬å‘ï¼š

   ```bash
   # åŸºç¡€è½¬å‘
   ssh -L 8080:localhost:8080 user@server

   # åå°è¿è¡Œ
   ssh -fN -L 8080:localhost:8080 user@server

   # è‡ªå®šä¹‰ç«¯å£
   ssh -L 9090:localhost:9090 user@server
   ```

2. é˜²ç«å¢™é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š

   ```bash
   # Ubuntu/Debian
   sudo ufw allow 8080

   # CentOS/RHEL
   sudo firewall-cmd --add-port=8080/tcp --permanent
   sudo firewall-cmd --reload
   ```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### ğŸ·ï¸ ä»»åŠ¡æ ‡è¯†ï¼ˆtask_idï¼‰

**âš ï¸ é‡è¦æ›´æ–°ï¼štask_id ç°å·²å®Œå…¨è‡ªåŠ¨åŒ–**

ç³»ç»Ÿä¼šä¸ºæ¯ä¸ªä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„ task_idï¼Œä½¿ç”¨æ—¶é—´æˆ³+éšæœºæ•°ç¡®ä¿å®Œå…¨ä¸ä¼šå†²çªã€‚

**ç”Ÿæˆæ ¼å¼**ï¼š`<é¡¹ç›®å>-<æ—¶é—´æˆ³>-<éšæœºæ•°>`

**ç¤ºä¾‹**ï¼š

- `ai-intervention-agent-845632-456`
- `my-project-123789-982`

**ç‰¹ç‚¹**ï¼š

- âœ… **å®Œå…¨è‡ªåŠ¨**ï¼šæ— éœ€æ‰‹åŠ¨æŒ‡å®šï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ
- âœ… **ç»å¯¹å”¯ä¸€**ï¼šæ—¶é—´æˆ³+éšæœºæ•°ç»„åˆï¼Œå‡ ä¹ä¸å¯èƒ½å†²çª
- âœ… **å¹¶å‘å®‰å…¨**ï¼šæ”¯æŒæ¯«ç§’çº§å¹¶å‘è°ƒç”¨ï¼Œæ¯æ¬¡ç”Ÿæˆä¸åŒID

**æ˜¾ç¤ºæ•ˆæœ**ï¼š

- æ ‡ç­¾é¡µæ˜¾ç¤ºä¸ºï¼š`ai-interven... 456`ï¼ˆå‰ç¼€æˆªæ–­ + å®Œæ•´åç¼€ï¼‰
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºå®Œæ•´ task_id

**ç”¨é€”**ï¼š

- å¤šä»»åŠ¡å¹¶å‘æ—¶è‡ªåŠ¨é˜²æ­¢å†²çª
- å¿«é€Ÿè¯†åˆ«ä¸åŒçš„ä»»åŠ¡è¯·æ±‚
- æ–¹ä¾¿æ—¥å¿—è¿½è¸ªå’Œè°ƒè¯•

### â° è‡ªåŠ¨é‡è°ƒå€’è®¡æ—¶

ä¸ºé˜²æ­¢ AI ä¼šè¯è¶…æ—¶ï¼Œç³»ç»Ÿæä¾›å¯é…ç½®çš„è‡ªåŠ¨é‡è°ƒæœºåˆ¶ã€‚

**å·¥ä½œæµç¨‹**ï¼š

1. ä»»åŠ¡åˆ›å»ºåå¼€å§‹å€’è®¡æ—¶ï¼ˆé»˜è®¤ 290 ç§’ï¼‰
2. Web UI æ˜¾ç¤ºåœ†å½¢è¿›åº¦æ¡å’Œå‰©ä½™ç§’æ•°
3. å€’è®¡æ—¶ç»“æŸåè‡ªåŠ¨æäº¤é»˜è®¤åé¦ˆ
4. AI ä¼šè¯ä¿æŒæ´»è·ƒï¼Œç»§ç»­æ‰§è¡Œä»»åŠ¡

**UI æ˜¾ç¤º**ï¼š

- åœ†å½¢è¿›åº¦æ¡ï¼šä» 12 ç‚¹ä½ç½®é€†æ—¶é’ˆå‡å°‘
- å‰©ä½™ç§’æ•°ï¼šæ˜¾ç¤ºåœ¨åœ†ç¯ä¸­å¿ƒ
- é¢œè‰²çŠ¶æ€ï¼š
  - ç™½è‰²åœ†ç¯ï¼šå½“å‰æ¿€æ´»çš„ä»»åŠ¡
  - ç´«è‰²åœ†ç¯ï¼šç­‰å¾…å¤„ç†çš„ä»»åŠ¡

**é…ç½®æ–¹æ³•**ï¼š
åœ¨ `config.jsonc` ä¸­è®¾ç½® `auto_resubmit_timeout`ï¼ˆå•ä½ï¼šç§’ï¼‰

### ğŸ“‘ å¤šä»»åŠ¡å¹¶å‘ç®¡ç†

æ”¯æŒåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œé€šè¿‡æ ‡ç­¾é¡µåˆ‡æ¢ç®¡ç†ã€‚

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š

- **æ ‡ç­¾é¡µæ˜¾ç¤º**ï¼šæ‰€æœ‰ä»»åŠ¡åœ¨æ ‡ç­¾æ æ˜¾ç¤ºï¼Œä¸€ç›®äº†ç„¶
- **ç‚¹å‡»åˆ‡æ¢**ï¼šç‚¹å‡»æ ‡ç­¾å³å¯åˆ‡æ¢åˆ°å¯¹åº”ä»»åŠ¡
- **ç‹¬ç«‹å€’è®¡æ—¶**ï¼šæ¯ä¸ªä»»åŠ¡æœ‰ç‹¬ç«‹çš„å€’è®¡æ—¶è¿›åº¦
- **çŠ¶æ€åŒºåˆ†**ï¼š
  - æ¿€æ´»ä»»åŠ¡ï¼šé«˜äº®æ˜¾ç¤ºï¼Œç™½è‰²åœ†ç¯
  - ç­‰å¾…ä»»åŠ¡ï¼šå¸¸è§„æ˜¾ç¤ºï¼Œç´«è‰²åœ†ç¯
  - å·²å®Œæˆä»»åŠ¡ï¼šè‡ªåŠ¨ç§»é™¤ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª
- **è‡ªåŠ¨æµè½¬**ï¼šæäº¤åé¦ˆåè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¾…å¤„ç†ä»»åŠ¡

**ä½¿ç”¨åœºæ™¯**ï¼š

- AI åŒæ—¶è¯·æ±‚å¤šæ¬¡ç”¨æˆ·åé¦ˆ
- å¤šä¸ªä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ
- éœ€è¦åœ¨ä¸åŒä»»åŠ¡é—´å¿«é€Ÿåˆ‡æ¢

## ğŸ—ï¸ æ¶æ„

```mermaid
graph TB
    subgraph "AI å·¥å…·ç¯å¢ƒ"
        A[AI Tool/Agent]
        A -->|MCP Protocol| B[server.py]
    end

    subgraph "MCP æœåŠ¡å™¨"
        B -->|interactive_feedback| C[launch_feedback_ui]
        C -->|å¥åº·æ£€æŸ¥| D[health_check_service]
        C -->|å¯åŠ¨æœåŠ¡| E[start_web_service]
        C -->|æ›´æ–°å†…å®¹| F[update_web_content]
        C -->|ç­‰å¾…åé¦ˆ| G[wait_for_feedback]

        B -->|é…ç½®ç®¡ç†| CM[config_manager.py]
        B -->|é€šçŸ¥ç³»ç»Ÿ| NM[notification_manager.py]
    end

    subgraph "Web æœåŠ¡"
        E -->|subprocess| H[web_ui.py]
        H -->|Flask App| I[WebFeedbackUI]
        I -->|è·¯ç”±| J[API Endpoints]
        I -->|æ¨¡æ¿| K[HTML Template]
        I -->|é™æ€èµ„æº| SR[fonts/icons/sounds]
    end

    subgraph "ç”¨æˆ·ç•Œé¢"
        J -->|HTTP| L[æµè§ˆå™¨]
        K -->|æ¸²æŸ“| L
        L -->|Markdown| M[å¯Œæ–‡æœ¬æ˜¾ç¤º]
        L -->|å›¾ç‰‡ä¸Šä¼ | IMG[Image Upload]
        L -->|äº¤äº’| N[ç”¨æˆ·åé¦ˆ]
    end

    subgraph "é€šçŸ¥åŠŸèƒ½"
        NM -->|å¤šç§é€šçŸ¥| NT[Web/Sound/Bark/System]
    end

    N -->|POST /api/submit| J
    J -->|JSON Response| G
    G -->|ç»“æœ| B
    B -->|MCP Response| A

    C -->|è§¦å‘é€šçŸ¥| NM
    CM -->|JSONCé…ç½®| CF[config.jsonc]
```

## åŒç±»äº§å“

1. [interactive-feedback-mcp](https://github.com/poliva/interactive-feedback-mcp)
2. [mcp-feedback-enhanced](https://github.com/Minidoracat/mcp-feedback-enhanced)
3. [cunzhi](https://github.com/imhuso/cunzhi)
4. [other interactive-feedback-mcp](https://github.com/Pursue-LLL/interactive-feedback-mcp)

## ğŸ“„ å¼€æºåè®®

MIT License - è‡ªç”±ä½¿ç”¨ï¼Œæ¬¢è¿è´¡çŒ®ï¼
