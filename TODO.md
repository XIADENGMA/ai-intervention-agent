# TODO

- [ ] 输入框允许拖入/粘贴/上传图片（允许 base64），并以合适的方式显示在输入框上方
- [ ] 允许接收到反馈时以合适的方式通知（声音/系统通知/bark 通知……）
- [ ] 更换页面上字体为版权合适字体
- [ ] 全平台快捷键支持
- [ ] 更新 README，英文、中文版本
  - 参考：https://github.com/Minidoracat/mcp-feedback-enhanced/blob/main/README.zh-CN.md
- [ ] 重构主题
  - 适配深色主题、浅色主题
  - 适配中文、英文
  - 在合适的地方显示版本信息、github 地址等
- [ ] 优化 prompt
- [ ] 研究是否可以打包成 vscode 插件
- [ ] 复制、粘贴优化，特别是在 ios 平台上
- [ ] 全平台支持、发布到 uvx pypi 平台
- [ ] github action（设想）
  - 自动发布
  - 自动化测试
  - 自动化 pr
- [ ] 可以的话，都通过环境变量配置

# List

## 输入框图片功能实现任务清单

### 前端功能

#### 1. HTML 结构增强

- [ ] 在输入框上方添加图片预览区域容器
- [ ] 添加隐藏的文件上传 input 元素
- [ ] 添加拖拽提示覆盖层
- [ ] 创建图片操作按钮（上传、删除等）
- [ ] 设计图片缩略图容器结构

#### 2. CSS 样式开发

- [ ] 设计图片预览区域基础样式
- [ ] 实现拖拽区域高亮效果样式
- [ ] 开发图片缩略图样式（包括尺寸限制）
- [ ] 设计图片操作按钮样式
- [ ] 添加加载状态动画样式
- [ ] 实现错误状态和提示样式
- [ ] 优化响应式布局样式

#### 3. 拖放功能实现

- [ ] 监听 textarea 区域的 dragover 事件
- [ ] 实现 dragenter 事件处理（显示拖拽提示）
- [ ] 实现 dragleave 事件处理（隐藏拖拽提示）
- [ ] 开发 drop 事件处理函数
- [ ] 阻止浏览器默认拖放行为
- [ ] 实现拖放区域视觉反馈

#### 4. 粘贴功能实现

- [ ] 监听 document 或 textarea 的 paste 事件
- [ ] 从剪贴板数据中提取图片内容
- [ ] 处理多种粘贴源（文件、URL、base64 字符串）
- [ ] 添加粘贴操作的视觉反馈
- [ ] 实现粘贴快捷键提示

#### 5. 文件选择功能

- [ ] 添加"上传图片"按钮到工具栏
- [ ] 实现文件选择按钮点击事件
- [ ] 配置文件选择限制（类型、大小）
- [ ] 处理文件选择完成事件

#### 6. 图片处理核心功能

- [ ] 实现图片文件类型验证函数
- [ ] 开发图片大小限制检查函数
- [ ] 创建图片转 base64 函数
- [ ] 实现图片压缩功能（可选）
- [ ] 开发图片预览生成函数
- [ ] 实现多图片管理功能

#### 7. 图片预览功能

- [ ] 创建图片预览元素生成函数
- [ ] 实现图片删除功能
- [ ] 显示图片基本信息（名称、大小）
- [ ] 添加图片预览交互效果
- [ ] 实现图片缩放预览功能（可选）

#### 8. 错误处理

- [ ] 实现无效文件类型处理
- [ ] 开发文件大小超限处理
- [ ] 添加图片加载失败处理
- [ ] 实现友好的错误提示信息显示

#### 9. 用户体验增强

- [ ] 添加操作反馈动画效果
- [ ] 实现加载状态指示器
- [ ] 添加拖放和粘贴提示文本
- [ ] 实现键盘快捷键支持
- [ ] 优化移动设备触摸交互

### 后端功能

#### 10. 数据结构扩展

- [ ] 扩展表单提交数据结构包含图片信息
- [ ] 设计图片数据 JSON 序列化格式
- [ ] 实现前端图片数据状态管理
- [ ] 添加图片数据清除功能

#### 11. API 扩展

- [ ] 修改/api/submit 接口支持图片数据
- [ ] 在 web_ui.py 中添加图片数据处理逻辑
- [ ] 实现 base64 图片解码和验证
- [ ] 添加服务端文件类型和大小验证

#### 12. MCP 集成

- [ ] 更新 server.py 中的反馈数据结构
- [ ] 扩展 interactive_feedback 工具支持图片数据
- [ ] 实现图片数据在 MCP 协议中的传输
- [ ] 添加图片传输的日志记录

### 测试与优化

#### 13. 功能测试

- [ ] 测试拖放上传功能（多种图片格式）
- [ ] 测试粘贴功能（不同来源）
- [ ] 测试文件选择上传功能
- [ ] 测试 base64 图片支持
- [ ] 验证文件大小和类型限制
- [ ] 测试图片删除功能

#### 14. 兼容性测试

- [ ] 测试主流桌面浏览器兼容性
- [ ] 测试移动设备浏览器兼容性
- [ ] 验证不同操作系统兼容性
- [ ] 测试不同屏幕尺寸适配性

#### 15. 性能优化

- [ ] 优化图片处理效率
- [ ] 减少 DOM 操作提升性能
- [ ] 优化大图片处理方法
- [ ] 实现延迟加载策略
- [ ] 优化内存使用

#### 16. 安全性

- [ ] 实施图片内容类型验证
- [ ] 添加文件大小限制
- [ ] 实现 XSS 防护措施
- [ ] 安全地处理用户上传内容
- [ ] 限制可上传的文件类型

### 文档和部署

#### 17. 代码文档

- [ ] 添加图片功能相关代码注释
- [ ] 更新 HTML 模板中的注释说明
- [ ] 编写 JavaScript 函数文档

#### 18. 用户文档

- [ ] 更新 README.md 说明图片功能
- [ ] 添加图片功能使用示例
- [ ] 创建功能截图和演示

#### 19. 部署验证

- [ ] 在开发环境验证完整功能
- [ ] 测试在不同环境下的兼容性
- [ ] 验证与现有 MCP 配置的兼容性
